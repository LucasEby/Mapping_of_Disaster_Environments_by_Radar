// Trashed Arduino code. I am storing this here incase we need any of it. Please ignore this.

/*int dataFromUser = 0;
void setup() {
  // put your setup code here, to run once:
  pinMode(LED_BUILTIN, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  // put your main code here, to run repeatedly:
  if(Serial.available() > 0) {
    dataFromUser = Serial.read();
  }

  if(dataFromUser == '1'){
    digitalWrite(LED_BUILTIN, HIGH);
  }
  else if(dataFromUser == '0'){
    digitalWrite(LED_BUILTIN, LOW);
  }
}*/

#include <Servo.h>

Servo myservo;
int angle = 0;
int newAngle = 0;
const int MaxChars = 4;
char strValue[MaxChars+1];
int index = 0;

void setup()
{
 Serial.begin(9600);
 myservo.attach(10);
 angle = 90;
}
void loop(){
}

void serialEvent() {
   while(Serial.available()) {
      char ch = Serial.read();
      Serial.write(ch);
      if (index < MaxChars && isDigit(ch)) { 
            strValue[index++] = ch; 
      } 
      else { 
            strValue[index] = 0; 
            newAngle = atoi(strValue); 
            if (newAngle > 0 && newAngle < 180) {
                   if (newAngle < angle) 
                       for (; angle > newAngle; angle -= 1) {
                             myservo.write(angle);
                       }  
                    else 
                       for (; angle < newAngle; angle += 1){
                          myservo.write(angle);
                    } 
            }
            index = 0;
            angle = newAngle;
      }  
   }
}
